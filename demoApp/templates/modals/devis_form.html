<!-- core/templates/modals/visite_form.html -->

<div class="modal" id="modalDevis" data-modal>
    <div class="modal-header">
        <div class="modal-header-left">
            <div class="modal-icon icon-green">
                <i data-lucide="map-pin-plus"></i>
            </div>
            <div>
                <div class="modal-title">Nouveau devis</div>
                <div class="modal-subtitle">Préparer les travaux et valider le avec le client</div>
            </div>
        </div>
        <button class="modal-close" data-modal-close>
            <i data-lucide="x"></i>
        </button>
    </div>

    <form method="post" action="{% url 'devis_create' %}" id="formDevis" data-modal-form>
        {% csrf_token %}
        <div class="modal-body">
            <div class="form-grid">
                {% for field in devis_form %}
                <div class="form-group {% if field.errors %}has-error{% endif %}">
                    <label class="form-label" for="{{ field.id_for_label }}">
                        {{ field.label }}
                        {% if field.field.required %}
                            <span class="required">*</span>
                        {% endif %}
                    </label>
                    {{ field }}
                    {% if field.errors %}
                        <span class="form-error">{{ field.errors.0 }}</span>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-cancel" data-modal-close>Annuler</button>
            <button type="submit" class="btn btn-submit">
                <i data-lucide="check" style="width:14px;height:14px;"></i>
                Créer la demande
            </button>
        </div>
    </form>
</div>
